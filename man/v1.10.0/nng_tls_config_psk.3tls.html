---
version: v1.10.0
layout: manpage_v2
title: nng_tls_config_psk(3tls)
---
<h1>nng_tls_config_psk(3tls)</h1>
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>nng_tls_config_psk - configure pre-shared keys (PSK) for TLS</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span><span class="tok-w"> </span><span class="tok-cpf">&lt;nng/nng.h&gt;</span>
<span class="tok-cp">#include</span><span class="tok-w"> </span><span class="tok-cpf">&lt;nng/supplemental/tls/tls.h&gt;</span>

<span class="tok-kt">int</span><span class="tok-w"> </span><span class="tok-nf">nng_tls_config_psk</span><span class="tok-p">(</span><span class="tok-n">nng_tls_config</span><span class="tok-w"> </span><span class="tok-o">*</span><span class="tok-n">cfg</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-k">const</span><span class="tok-w"> </span><span class="tok-kt">char</span><span class="tok-w"> </span><span class="tok-o">*</span><span class="tok-n">identity</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-k">const</span><span class="tok-w"> </span><span class="tok-kt">uint8_t</span><span class="tok-w"> </span><span class="tok-o">*</span><span class="tok-n">key</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-kt">size_t</span><span class="tok-w"> </span><span class="tok-n">key_len</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>nng_tls_config_psk()</code> function configures a pre-shared secret to use for TLS connections.</p>
</div>
<div class="paragraph">
<p>Client mode configurations can call this just once, to set their own <em>identity</em>
and a single <em>key</em> of <em>key_len</em> bytes in size.</p>
</div>
<div class="paragraph">
<p>Server mode configurations can call this multiple times,
and servers will look up the appropriate key to use when a client connects.</p>
</div>
<div class="paragraph">
<p>The <em>identity</em> may be thought of at some level as a public value like a user name,
and the <em>key</em> of course is the confidential material used to establish keys.
Both parties my have the same values for <em>identity</em>, <em>key</em>, and <em>key_len</em>.</p>
</div>
<div class="paragraph">
<p>Implementations may impose limits on whether this functionality is supported, as well
as limitations on the length of keys or identities, but generally key lengths of up
to 32 bytes as well as identities of up to 64 bytes will be supported wherever PSK
configurations are present.</p>
</div>
<div class="paragraph">
<p>Note that while some implementations may allow arbitrary byte patterns in the identity,
this implementation does not support embedded zero bytes, and assumes that the values
are printable (for logging).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_return_values">RETURN VALUES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This function returns 0 on success, and non-zero otherwise.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_errors">ERRORS</h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>NNG_ENOMEM</code>
</td>
<td class="hdlist2">
<p>Insufficient memory is available.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>NNG_EBUSY</code>
</td>
<td class="hdlist2">
<p>The configuration <em>cfg</em> is already in use, and cannot be modified.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>NNG_EINVAL</code>
</td>
<td class="hdlist2">
<p>Invalid parameters were supplied.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph text-left">
<p><a href="nng_strerror.3.html">nng_strerror(3)</a>,
<a href="nng_tls_config_alloc.3tls.html">nng_tls_config_alloc(3tls)</a>,
<a href="nng.7.html">nng(7)</a></p>
</div>
</div>
</div>
